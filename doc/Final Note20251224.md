# 專案技術描述報告 - 2025/12/24

## 一、簡單描述
本專案是一個具備強烈視覺風格的「台灣氣象終端系統」。設計理念以「末日啟示錄」與「粗獷主義」為核心，打造出一個宛如文明崩潰後重新運行的天氣顯示終端。技術上基於 **Next.js 16** 與 **Tailwind CSS 4** 開發，整合中央氣象署（CWA）即時 API，讓使用者能透過互動式像素地圖，直觀且即時地掌握全台 22 縣市的天氣狀況。這不僅是一個工具軟體，更是一個結合 AI 共創（Vibe Coding）與人文敘事的數位藝術作品。

## 二、功能描述
1. **互動式縣市選取**：
   - 透過精心設計的「台灣像素地圖」組件，使用者可點擊選取 22 縣市。
   - 地圖具備選中狀態回饋，並與主畫面氣象資料即時連動。
2. **即時氣象資料串接**：
   - 使用封裝好的 API 模組（`lib/api.ts`）自動連對後端 API，獲取 CWA 最新預報。
   - 包含溫度、濕度、風速等核心指標，並能自動將「台」校正為「臺」。
3. **末日風格視覺效果**：
   - **動態背景效果**：包含掃描線、雜訊與像素顆粒，營造電子設備老舊的質感。
   - **天氣動畫系統**：根據晴、雲、雨、風不同狀態，觸發對應的像素風 CSS 動畫。
   - **數據遞增動畫**：溫度數字採用 Count-up 效果，提升資訊更新時的動態體驗。
4. **多模式與應急機制**：
   - **日夜模式**：支援系統級黑暗模式，並針對不同模式調整掃描線與故障感強度。
   - **Mock Fallback**：當網路或後端 API 異常時，自動切換至預設模擬數據，確保介面不崩潰且功能可用。

## 三、完整技術描述
### 前端技術
- **框架架構**：採用 **Next.js 16** (App Router 版本) 與 **React 19**，充分發揮 React 核心 Hook 與元件化的優勢。
- **樣式系統**：使用 **Tailwind CSS 4** 進行原子化樣式管理，並配合 `tailwindcss-animate` 實現細膩的過場與故障藝術效果。
- **組件定義**：整合 **Radix UI** 提供無障礙（Accessibility）基礎組件，並自行擴充非對稱式（Asymmetric）佈局與粗獷設計元素（如裝飾性色塊、邊框）。
- **圖示庫**：使用 **Lucide React**。

### 後端技術與資料處理
- **API 通訊**：前端透過 fetch 非同步向部署於 **Zeabur** 的 Node.js/Express 後端請求資料。
- **參數校驗**：支援環境變數（`.env`）管理 API Key，並在後端進行縣市參數驗證與字串正規化。
- **資料聚合**：由於氣象署 API 提供的是預報範圍（最小/最大溫），前端邏輯會自動提取並取平均值作為當前顯示溫度，並解析資料點的更新時間。

### 系統架構與開發模式
- **AI 共創流程 (Vibe Coding)**：本專案大量運用 AI 進行設計探索與基礎程式碼生成（使用 v0 進行 UI 原型設計），再由人工進行細節調校與邏輯修復。
- **高彈性配置**：利用 `public/config.json` 實作「執行期間注入」，讓靜態部署的網頁能在不重新構建（Build）的情況下動態更換 API Base URL。
- **型別安全**：全量採用 **TypeScript** 進行開發，確保 API 資料結構與組件 Props 的嚴謹性。

## 四、未來可以改善的方向
1. **豐富氣象深度數據**：
   - 整合更多 CWA API 端點，如各區降雨機率曲線、紫外線指數（UVI）及空氣品質（AQI）。
   - 加入未來 36 小時或一週天氣預報的圖表展示。
2. **強化地圖互動精確度**：
   - 優化目前的地圖 SVG 節點，加入滑鼠懸停（Hover）時的資訊預覽效果。
   - 評估加入鄉鎮市區層級的細分查詢。
3. **離線存取與 PWA 化**：
   - 實作 Service Worker 快取，將網頁轉換為 Progressive Web App，讓使用者即使在離線狀態下也能查看最後一次成功的氣象記錄。
4. **效能優化 (Data Fetching)**：
   - 引進 `SWR` 或 `React Query` 模組，優化 API 的快取機制與背景自動重新載入（Auto-refetching）邏輯。
5. **社交分享功能**：
   - 實作生成「天氣快照」圖片功能，讓使用者能將帶有特定末日風格的天氣截圖分享至社交平台。
